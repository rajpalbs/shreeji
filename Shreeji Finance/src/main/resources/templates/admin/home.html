<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head lang="en" th:replace="head :: head"></head>
<body>

	<!-- Landing home page - STARTS -->
	<div class="container h-100" style="margin: 10em;">
    	<div class="row h-100 justify-content-center align-items-center">
    		
    		<div class="col-lg-3">
    				<img th:src="@{/images/loan.svg}" data-toggle="modal" data-target="#loantypemodal"
    					class="rounded-circle" width="200" height="200" style="background: linear-gradient(0deg,teal,darkturquoise);"/> 
    			
    		</div>
     		
     		<div class="col-lg-3">
     			<a th:href="@{/insurance/create}">
     				<img th:src="@{/images/insurance.svg}" 
     					class="rounded-circle" width="200" height="200" style="background: linear-gradient(0deg,peachpuff,moccasin);"/>
     					
     			</a>		
     		</div>
     		
     		<div class="col-lg-3">
     			<img th:src="@{/images/report.png}" data-toggle="modal" data-target="#reportmodal" class="rounded-circle" width="200" height="200"/>
     		</div>
    	</div>
		<th:block th:include="tail :: bodytail"></th:block>
	</div>
	<!-- Landing home page -ENDS -->
	
	<!-- Loan Type Selection modal Dialog - STARTS -->
	<div class="modal fade" id="loantypemodal" tabindex="-1" role="dialog" aria-labelledby="Please choose loan type" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLongTitle">Please choose loan type</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="radio">
						<label><input type="radio" name="loanType" value="vehicle"> Vehicle Loan</label>
					</div>
					<div class="radio">
						<label><input type="radio" name="loanType" value="home"> Home Loan</label>
					</div>
					<div class="radio">
						<label><input type="radio" name="loanType" value="kcc"> KCC</label>
					</div>
				</div>
				<div class="modal-footer">
        			<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        			<button type="button" class="btn btn-primary" id="submitloantype">Go ...</button>
      			</div>
      			<form id="loanform" th:action="@{/loan/TYPE/create}" method="get">
      			</form>
			</div>
		</div>
	</div>
	<!-- Loan Type Selection modal Dialog-END -->
	
	<!-- Report Modal - START -->
	<div class="modal fade" id="reportmodal" tabindex="-1" role="dialog" aria-labelledby="Please choose From Date & To Date" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<form id="reportform" th:action="@{/report/download}" method="post">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLongTitle">Please choose From Date & To Date</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>			
					<div class="modal-body">
						<div class="row mb-4">
							<div class="col">From Date: 
								<input id="fromdate" name="fromDate" type="text" class="form-control form-control-sm rounded-1" required readonly="true" />
							</div>
							<div class="col">To Date: 
								<input id="todate" name="toDate" type="text" class="form-control form-control-sm rounded-1"	required readonly="true" />
							</div>
						</div>
					</div>
					<div class="modal-footer">
	        			<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	        			<button type="submit" class="btn btn-primary">Download Report</button>
	      			</div>
      			</form>
			</div>
		</div>
	</div>
	<!-- Report Modal - END -->
	
	
	<div id="messagemodal" class="modal fade" role="dialog">
		<div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title text-success" th:text="${message}"/>
				</div>
				<div class="modal-body">
					<div th:if="${data}" >
						<table class="table table-bordered table-hover">
							<tbody>
								<th:block th:each="key: ${data.keySet()}">
	    							<tr>
	        							<td th:text="${key}"/>
	        							<td th:text="${data.get(key)}"/>
	    							</tr>
								</th:block>
							</tbody>
						</table>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">OK</button>
				</div>
			</div>
		</div>
	</div>
</body>

<!-- SCRIPTS -->
<script type='text/javascript' th:inline="javascript">
	/*<![CDATA[*/

		var message = /*[[${message}]]*/ ;

	/*]]>*/
	if(message){
		$('#messagemodal').modal('show');
	}
	jQuery(document).ready(function(){
		var loanType;
		$('input:radio[name="loanType"]').change(function(){
			loanType = $(this).val();
		});
		
		$("#submitloantype").on('click', function() {
			if(loanType){
				$("#loanform")
					.attr("action", $('#loanform').attr('action').replace("TYPE", loanType))
					.submit();
			}
		});
		
		var today = new Date();
		const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
		var strDate = today.getDate() + "-" + monthNames[(today.getMonth())] + "-" + today.getFullYear();
		$('#fromdate').datepicker({
			format: 'dd-mmm-yyyy',
			uiLibrary: 'bootstrap4',
			value: strDate,
			maxDate: new Date()
		});

		$('#todate').datepicker({
			format: 'dd-mmm-yyyy',
			uiLibrary: 'bootstrap4',
			value: strDate,
			maxDate: new Date()
		});

	});
</script>

</html>